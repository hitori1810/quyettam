
({events:{'click [name=save_button]':'saveButton','click [name=cancel_button]':'cancelButton'},saveButton:function(){var self=this,createModel=this.context.get('createModel');self.$('[name=save_button]').attr('data-loading-text',app.lang.get('LBL_LOADING'));self.$('[name=save_button]').button('loading');createModel.set('portal_flag',true);createModel.save(null,{relate:true,fieldsToValidate:this.getFields(this.module),success:function(){app.file.checkFileFieldsAndProcessUpload(createModel,{success:function(){self.saveComplete();}});},error:function(){self.resetButton();}});},cancelButton:function(){this.$('.modal').modal('hide').find('form').get(0).reset();if(this.context.has('createModel')){this.context.get('createModel').clear();}},saveComplete:function(){this.$('.modal').modal('hide').find('form').get(0).reset();this.resetButton();this.collection.fetch({relate:true});},resetButton:function(){this.$('[name=save_button]').button('reset');}})